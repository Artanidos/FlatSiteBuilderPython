#############################################################################
# Copyright (C) 2019 Olaf Japp
#
# This file is part of FlatSiteBuilder.
#
#  FlatSiteBuilder is free software: you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation, either version 3 of the License, or
#  (at your option) any later version.
#
#  FlatSiteBuilder is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  You should have received a copy of the GNU General Public License
#  along with FlatSiteBuilder.  If not, see <http://www.gnu.org/licenses/>.
#
#############################################################################

import os
import shutil
from widgets.interfaces import ElementEditorInterface
from PyQt5.QtGui import QImage
from PyQt5.QtCore import Qt, qVersion, QFile, QDir, qRegisterResourceData, qUnregisterResourceData, pyqtProperty
from PyQt5.QtWidgets import QGridLayout, QLineEdit, QPushButton, QLabel, QFileDialog, QListWidget, QListWidgetItem
from PyQt5.QtQml import qmlRegisterType
from widgets.imageselector import ImageSelector
from widgets.flatbutton import FlatButton
from widgets.item import Item


class ImageEditor(ElementEditorInterface):
    def __init__(self):
        ElementEditorInterface.__init__(self)
        self.site = None
        self.animation = ""
        self.class_name = "ImageEditor"
        self.display_name = "Image"
        self.tag_name = "Image"
        self.version = "1.0"
        self.icon = QImage(":/imageeditor.png")

        self.changed = False
        self.setAutoFillBackground(True)

        grid = QGridLayout()

        self.source = QLineEdit()
        self.alt = QLineEdit()
        self.alt.setMaximumWidth(200)
        self.title = QLineEdit()
        self.title.setMaximumWidth(200)
        self.adminlabel = QLineEdit()
        self.adminlabel.setMaximumWidth(200)
        seek = QPushButton("...")
        seek.setMaximumWidth(50)
        titleLabel = QLabel("Image Module Plugin")
        fnt = titleLabel.font()
        fnt.setPointSize(16)
        fnt.setBold(True)
        titleLabel.setFont(fnt)
        self.image = ImageSelector()
        self.image.setImage(QImage(":/images/image_placeholder.png"))

        close = FlatButton(":/images/close_normal.png", ":/images/close_hover.png")
        close.setToolTip("Close Editor")

        self.animation_type = QListWidget()
        self.animation_type.addItem("None")
        self.animation_type.addItem("Attention Seekers")
        self.animation_type.addItem("Bouncing Entrances")
        self.animation_type.addItem("Bouncing Exits")
        self.animation_type.addItem("Fading Entrances")
        self.animation_type.addItem("Fading Exits")
        self.animation_type.addItem("Flippers")
        self.animation_type.addItem("Rotating Entrances")
        self.animation_type.addItem("Rotating Exits")
        self.animation_type.addItem("Sliding Entrances")
        self.animation_type.addItem("Sliding Exits")
        self.animation_type.addItem("Zoom Entrances")
        self.animation_type.addItem("Zoom Exits")

        self.animation_subtype = QListWidget()

        grid.addWidget(titleLabel, 0, 0)
        grid.addWidget(close, 0, 3, 1, 1, Qt.AlignRight)
        grid.addWidget(QLabel("Path"), 1, 0)
        grid.addWidget(self.source, 2, 0, 1, 3)
        grid.addWidget(seek, 2, 3)
        grid.addWidget(self.image, 3, 0, 1, 4)
        grid.setRowStretch(3, 1)
        grid.addWidget(QLabel("Alt"), 6, 0)
        grid.addWidget(self.alt, 7, 0)
        grid.addWidget(QLabel("Title"), 8, 0)
        grid.addWidget(self.title, 9, 0)
        grid.addWidget(QLabel("Animation"), 6, 1)
        grid.addWidget(self.animation_type, 7, 1, 6, 1)
        grid.addWidget(self.animation_subtype, 7, 2, 6, 1)
        grid.addWidget(QLabel("Admin Label"), 11, 0)
        grid.addWidget(self.adminlabel, 12, 0)
        self.setLayout(grid)

        close.clicked.connect(self.closeEditor)
        self.source.textChanged.connect(self.contentChanged)
        self.alt.textChanged.connect(self.contentChanged)
        self.title.textChanged.connect(self.contentChanged)
        self.adminlabel.textChanged.connect(self.contentChanged)
        seek.clicked.connect(self.seek)
        self.image.clicked.connect(self.seek)
        self.animation_type.currentTextChanged.connect(self.animationTypeChanged)
        self.animation_subtype.currentTextChanged.connect(self.contentChanged)

    def animationTypeChanged(self, type):
        self.contentChanged()
        self.animation_subtype.clear()
        if type == "Attention Seekers":
            self.addSubItem("Bounce", "bounce")
            self.addSubItem("Flash", "flash")
            self.addSubItem("Pulse","pulse")
            self.addSubItem("Rubber Band","rubberBand")
            self.addSubItem("Shake","shake")
            self.addSubItem("Swing","swing")
            self.addSubItem("Tada","tada")
            self.addSubItem("Wobble","wobble")
        elif type == "Bouncing Entrances":
            self.addSubItem("Bounce In","bounceIn")
            self.addSubItem("Bounce In Down","bounceInDown")
            self.addSubItem("Bounce In Left","bounceInLeft")
            self.addSubItem("Bounce In Right","bounceInRight")
            self.addSubItem("Bounce In Up","bounceInUp")
        elif type == "Bouncing Exits":
            self.addSubItem("Bounce Out","bounceOut")
            self.addSubItem("Bounce Out Down","bounceOutDown")
            self.addSubItem("Bounce Out Left","bounceOutLeft")
            self.addSubItem("Bounce Out Right","bounceOutRight")
            self.addSubItem("Bounce Out Up","bounceOutUp")
        elif type == "Fading Entrances":
            self.addSubItem("Fade In", "fadeIn")
            self.addSubItem("Fade In Down", "fadeInDown")
            self.addSubItem("Fade In Down Big", "fadeInDownBig")
            self.addSubItem("Fade In Left", "fadeInLeft")
            self.addSubItem("Fade In Left Big", "fadeInLeftBig")
            self.addSubItem("Fade In Right", "fadeInRight")
            self.addSubItem("Fade In Right Big", "fadeInRightBig")
            self.addSubItem("Fade In Up", "fadeInUp")
            self.addSubItem("Fade In Up Big", "fadeInUpBig")
        elif type == "Fading Exits":
            self.addSubItem("Fade Out", "fadeOut")
            self.addSubItem("Fade Out Down", "fadeOutDown")
            self.addSubItem("Fade Out Down Big", "fadeOutDownBig")
            self.addSubItem("Fade Out Left", "fadeOutLeft")
            self.addSubItem("Fade Out Left Big", "fadeOutLeftBig")
            self.addSubItem("Fade Out Right", "fadeOutRight")
            self.addSubItem("Fade Out Right Big", "fadeOutRightBig")
            self.addSubItem("Fade Out Up", "fadeOutUp")
            self.addSubItem("Fade Out Up Big", "fadeOutUpBig")
        elif type == "Flippers":
            self.addSubItem("Flip", "flip")
            self.addSubItem("Flip In X", "flipInX")
            self.addSubItem("Flip In Y", "flipInY")
            self.addSubItem("Flip Out X", "flipOutX")
            self.addSubItem("Flip Out Y", "flipOutY")
        elif type == "Rotating Entrances":
            self.addSubItem("Rotate In", "rotateIn")
            self.addSubItem("Rotate In Down Left", "rotateInDownLeft")
            self.addSubItem("Rotate In Down Right", "rotateInDownRight")
            self.addSubItem("Rotate In Up Left", "rotateInUpLeft")
            self.addSubItem("Rotate In Up Right", "rotateInUpRight")
        elif type == "Rotating Exits":
            self.addSubItem("Rotate Out", "rotateOut")
            self.addSubItem("Rotate Out Down Left", "rotateOutDownLeft")
            self.addSubItem("Rotate Out Down Right", "rotateOutDownRight")
            self.addSubItem("Rotate Out Up Left", "rotateOutUpLeft")
            self.addSubItem("Rotate Out Up Right", "rotateOutUpRight")
        elif type == "Sliding Entrances":
            self.addSubItem("Slide In Up", "slideInUp")
            self.addSubItem("Slide In Down", "slideInDown")
            self.addSubItem("Slide In Left", "slideInLeft")
            self.addSubItem("Slide In Right", "slideInRight")
        elif type == "Sliding Exits":
            self.addSubItem("Slide Out Up", "slideOutUp")
            self.addSubItem("Slide Out Down", "slideOutDown")
            self.addSubItem("Slide Out Left", "slideOutLeft")
            self.addSubItem("Slide Out Right", "slideOutRight")
        elif type == "Zoom Entrances":
            self.addSubItem("Zoom In", "zoomIn")
            self.addSubItem("Zoom In Down", "zoomInDown")
            self.addSubItem("Zoom In Left", "zoomInLeft")
            self.addSubItem("Zoom In Right", "zoomInRight")
            self.addSubItem("Zoom In Up", "zoomInUp")
        elif type == "Zoom Exits":
            self.addSubItem("Zoom Out", "zoomOut")
            self.addSubItem("Zoom Out Down", "zoomOutDown")
            self.addSubItem("Zoom Out Left", "zoomOutLeft")
            self.addSubItem("Zoom Out Right", "zoomOutRight")
            self.addSubItem("Zoom Out Up", "zoomOutUp")
    
    def addSubItem(self, title, data):
        item = QListWidgetItem(title)
        item.setData(Qt.UserRole, data)
        self.animation_subtype.addItem(item)

    def closeEditor(self):
        if self.changed:
            self.content.src = self.source.text()
            self.content.alt = self.alt.text()
            self.content.title = self.title.text()
            self.content.adminlabel = self.adminlabel.text()
            if self.animation_type.currentItem:
                self.content.animation_type = self.animation_type.currentItem().data(Qt.DisplayRole)
            if self.animation_subtype.currentItem():
                self.content.animation = self.animation_subtype.currentItem().data(Qt.UserRole)
            else:
                self.content.animation = ""
            #foreach(QString attName, m_attributes.keys())
            #{
            #    stream.writeAttribute(attName, m_attributes.value(attName))
            #}
        self.close.emit()

    def getDefaultContent(self):
        return Image()

    def setContent(self, content):
        self.content = content
        self.source.setText(content.src)
        self.alt.setText(content.alt)
        self.title.setText(content.title)
        self.adminlabel.setText(content.adminlabel)
        if content.src:
            self.image.setImage(QImage(os.path.join(self.site.source_path, "assets", "images", content.src)))
        index = self.findData(self.animation_type, content.animation_type, Qt.DisplayRole)
        self.animation_type.setCurrentRow(index)
        index = self.findData(self.animation_subtype, content.animation, Qt.UserRole)
        self.animation_subtype.setCurrentRow(index)
        self.changed = False

    def findData(self, list, value, role):
        if not value:
            return -1
        for index in range(list.count()):
            item = list.item(index)
            if item.data(role) == value:
                return index
        return -1

    def getContent(self):
        return self.content

    def seek(self):
        fileName = ""
        dialog = QFileDialog()
        dialog.setFileMode(QFileDialog.AnyFile)
        dialog.setNameFilter("Images (*.png *.gif *.jpg)All (*)")
        dialog.setWindowTitle("Load Image")
        dialog.setOption(QFileDialog.DontUseNativeDialog, True)
        dialog.setAcceptMode(QFileDialog.AcceptOpen)
        if dialog.exec():
            fileName = dialog.selectedFiles()[0]
        del dialog
        if not fileName:
            return

        # copy file to assets dir
        name = os.path.basename(fileName).replace(" ", "_")
        path = os.path.join(self.site.source_path, "assets", "images", name)
        self.source.setText(os.path.basename(path))
        shutil.copy(fileName, path)

        # also copy file to deploy dir for previews
        dpath = os.path.join(self.site.deploy_path, "assets", "images", name)
        shutil.copy(fileName, dpath)

        self.image.setImage(QImage(path))
        self.contentChanged()

    def registerContenType(self):
        qmlRegisterType(Image, 'ImageEditor', 1, 0, 'Image')

    def writeImportString(self, f):
        f.write("import ImageEditor 1.0\n")


class Image(Item):
    def __init__(self, parent = None):
        super().__init__(parent)
        self._src = ""
        self._alt = ""
        self._title = ""
        self.tag_name = "Image"
        self._animation = ""
        self._animation_type = ""

    @pyqtProperty('QString')
    def src(self):
        return self._src

    @src.setter
    def src(self, src):
        self._src = src

    @pyqtProperty('QString')
    def alt(self):
        return self._alt

    @alt.setter
    def alt(self, alt):
        self._alt = alt

    @pyqtProperty('QString')
    def animation(self):
        return self._animation

    @animation.setter
    def animation(self, animation):
        self._animation = animation

    @pyqtProperty('QString')
    def animation_type(self):
        return self._animation_type

    @animation_type.setter
    def animation_type(self, animation_type):
        self._animation_type = animation_type

    @pyqtProperty('QString')
    def title(self):
        return self._title

    @title.setter
    def title(self, title):
        self._title = title

    def save(self, f, indent):
        f.write("\n")
        f.write(" " * indent + "Image {\n")
        self.writeAttribute(f, indent + 4, "src", self.src)
        self.writeAttribute(f, indent + 4, "alt", self.alt)
        self.writeAttribute(f, indent + 4, "title", self.title)
        self.writeAttribute(f, indent + 4, "adminlabel", self._adminlabel)
        self.writeAttribute(f, indent + 4, "animation", self._animation)
        self.writeAttribute(f, indent + 4, "animation_type", self._animation_type)
        f.write(" " * indent + "}\n")

    def getHtml(self):
        if self._animation:
            return "<img alt=\"" + self.alt + "\" title=\"" + self.title + "\" class=\"img-responsive animated " + self._animation + " pull-left inner\" src=\"assets/images/" + self.src + "\">\n"
        else:
            return "<img alt=\"" + self.alt + "\" title=\"" + self.title + "\" class=\"img-responsive pull-left inner\" src=\"assets/images/" + self.src + "\">\n"


    def pluginStyles(self):
        return "<link href=\"assets/plugins/animate/animate.css\" rel=\"stylesheet\" type=\"text/css\"/>\n"

    def installAssets(self, assets_path):
        assets = QDir(assets_path)
        assets.mkdir("plugins")
        assets.cd("plugins")
        assets.mkdir("animate")
        QFile.copy(":/animate.css", assets_path + "/plugins/animate/animate.css")

qt_resource_data = b"\
\x00\x00\x0b\x63\
\x00\
\x00\x5d\x29\x78\x9c\xd5\x5c\x6d\x6f\xdb\x38\x12\xfe\x9e\x5f\xa1\
\x5d\xa0\x40\x5a\x44\x8a\x5e\x2c\xdb\x49\xbe\x2c\x7a\x7b\x07\x04\
\xd8\xbd\x3d\xdc\xb6\x87\xe6\xa3\x6c\x2b\xb1\x2e\xb2\x64\xd8\xf2\
\xb6\xdd\x43\xff\xfb\x91\x94\x2c\xbe\xcd\x50\x94\x2c\xa7\x59\xec\
\xd6\x89\x35\x43\xce\xcb\x33\x9c\x21\x29\x32\x3f\x2d\xd7\xc9\x6e\
\x9f\x56\xce\x8f\x1f\x3f\xfc\xc3\x9d\xff\x78\x77\x71\x71\xfd\xee\
\x87\x0b\xe7\x9d\x93\x14\xd9\x26\xa9\x52\x6f\xb9\xdf\x3b\xee\xba\
\xaa\xb6\xb7\xd7\xd7\xab\xa4\x48\x57\x69\xe1\x6d\xd2\xeb\x86\x4c\
\x39\xff\x93\xee\xf6\x59\x59\x38\xae\x13\x79\xb1\x17\xd2\x47\xbf\
\x64\xcb\xb4\xd8\xa7\x2b\xe7\x50\xac\xd2\x9d\x53\xad\x53\xe7\xd7\
\xfb\x0f\x4e\x5e\x3f\x26\x9c\x4d\x87\xe5\x96\x7c\x2f\x0f\xbb\x65\
\xea\x95\xbb\xa7\xeb\x86\xbe\xbf\x26\xcc\xa4\x1b\xda\xd3\xdf\xca\
\xed\xd7\x5d\xf6\xb4\xae\x9c\xcb\xe5\x5b\x27\xf4\x83\x99\xf3\x33\
\x91\x9d\xe6\xce\xdf\x89\x26\x84\xe3\xfa\xe2\xc2\x6b\x94\x59\x39\
\xff\xbb\x70\x1a\xc5\x89\x42\xee\xea\xb0\x63\xbf\xdc\x3a\xc1\xfe\
\x4e\xa2\x3c\x66\x79\xee\x6e\xca\x55\x7a\xeb\x2c\xca\x6a\x7d\x77\
\xf1\x4d\xe8\xc5\xcb\x8a\xc7\xac\xc8\xaa\x54\xe9\x8e\x3c\xa9\xfb\
\x73\x97\xe5\xa1\xa8\x6e\x9d\x23\x9f\xd2\x7c\x9d\x15\x4f\x6a\x5b\
\xae\x4a\xb8\x57\xd8\x1f\xf3\x6c\xfb\xdb\xa1\xfa\x74\xa5\x3f\x7b\
\x10\x9f\x2d\x88\xd0\x65\x7a\x5f\xe8\xcf\x08\x27\x2a\xce\x9b\xc5\
\xb5\xc0\x9f\x9e\xd3\xaf\x8f\xbb\x64\x93\xee\x9d\xba\x15\x6b\xf2\
\xb8\x2b\x37\x57\xc4\xad\x6f\xae\x9c\x38\x22\x1f\x73\xfa\x5b\x55\
\x32\x9a\xd8\x61\x95\x6d\x88\x55\xee\x23\x69\x58\xf7\xbb\x3c\x2c\
\xb2\xa5\xbb\x48\xff\xcc\xd2\xdd\xa5\xef\x85\x41\x7c\xe5\xf8\xde\
\x34\xf0\xe9\x8f\x28\x26\xdf\x02\xcf\xf7\xfd\xb7\x77\xac\xa3\x6a\
\x97\x14\xfb\xc7\x72\xb7\xb9\xad\x7f\xcd\x89\xf6\xd1\xea\xd2\xbf\
\x22\xff\x31\x16\xa2\xa0\xe3\x4c\xa8\xf0\x49\xf4\xa6\xb7\xf4\x59\
\xcc\xa4\xfb\x31\x93\x3e\x6f\xbe\x4d\x3b\xa5\x3b\x6e\xe4\x6f\xbf\
\x10\x66\xae\xc3\xcc\x7f\x49\xf1\x41\xac\x88\xbf\x69\xc5\xa3\xad\
\xdc\x09\x69\x73\x6c\x42\x23\x49\x80\x93\xeb\x5c\x10\xa4\x6f\x1b\
\xa4\x29\x6b\xdb\x9d\x5b\x92\xe1\x94\x51\x23\xd2\x82\x04\x34\x8d\
\xff\xaa\xdc\xa8\x21\xf2\x98\x27\xfb\xb5\x10\x21\xb1\x14\x17\xe5\
\x36\x59\x66\xd5\x57\x32\xae\x5a\xc5\xc3\x98\x30\xcc\xe2\x37\x2a\
\x87\xcf\xf5\xe4\x7d\xaa\x6a\x32\x0a\x53\xe1\xfa\x9d\x53\xeb\x97\
\xe4\xf9\x57\x27\x39\x54\xeb\x72\x47\xc6\xf5\xe2\xab\xf3\xcf\x6c\
\xf9\xec\xfc\x2b\xad\xaa\xac\x6a\xf2\xc7\x9e\x24\x90\xa7\xac\x5a\
\x1f\x16\xde\xb2\xdc\x5c\x17\x84\x61\xcb\xe8\xd7\x4f\x79\xb6\x4a\
\x59\x6a\x10\x4c\xda\x1e\xf2\x3d\x0f\x7a\xdd\xcb\xfb\x65\x92\x53\
\x0f\x07\x24\x74\xc9\xff\x1c\x93\x18\xc2\xa4\xe5\x26\xb0\xb3\x58\
\x6f\x3e\x79\xb3\xd6\x5b\x9d\x32\xa8\x73\xb8\x76\xaa\x73\x18\x45\
\xc5\x67\x77\x58\x2c\xd2\xdd\xfb\xa4\x58\x0d\xb1\x28\x32\x5b\x14\
\xb2\x00\x9e\xc5\x52\x9b\x89\xa9\x4d\xc3\xcd\x5a\xda\x7b\xae\xce\
\x19\x73\xb9\xcd\x34\x36\xb4\xf1\x6e\xb8\xb3\x85\x31\x6b\x6a\x52\
\x73\xd7\x0d\x87\x82\xa3\x78\x5b\x45\x88\x93\x55\x98\xf6\xeb\xe4\
\x59\x4c\xb4\x90\x58\x25\x27\xf8\x52\x3e\x08\xe8\xb8\x8b\x58\x7a\
\xa6\x1f\x33\xfa\xd1\x99\x23\xdc\xa0\xce\x6a\x52\x4f\x2c\xc7\xb3\
\x0c\x3b\xf5\xeb\x44\x6f\xee\x44\xeb\x83\x3a\x82\xdb\xa3\xfa\x80\
\x51\x54\xf3\xd7\x69\xb2\xfa\xbd\x6d\x62\x94\xf8\xe9\x52\xd0\x75\
\xea\x41\x88\x0a\xbc\xee\x74\xfb\xe5\xad\xb3\x2b\x2b\xf2\xed\xe1\
\xd2\xbd\x59\xa5\x4f\x82\xcf\xe6\x5d\xcd\x63\xb1\xf5\x4c\x6a\x1c\
\x05\x9d\xb2\x23\x49\x76\x2c\x35\x9f\x44\x5d\xcd\x43\xb1\x75\x24\
\x35\x06\x87\x0b\xe0\x21\x8a\x84\xec\x5a\x43\xad\x4a\x93\x7d\xea\
\x66\x85\x5b\x1e\xaa\x3b\x00\xb7\xb6\x1f\x2d\x74\x3f\x93\x7e\x58\
\xe7\x21\xa4\x56\x6d\x41\x1b\xb2\x74\xc0\x28\x9e\xb0\x6b\x45\x62\
\x55\x6a\x36\xb5\x6b\x26\xcb\x02\x83\x19\x90\x25\xb7\x82\x06\xa3\
\xde\x48\x50\x8f\x8d\x80\xd6\x2d\x7a\x45\xad\xca\x6d\x53\x55\x21\
\x4f\xb3\x96\xaa\x97\xab\x64\x95\x0c\xc9\xe0\x2c\x2f\x80\xc0\xf0\
\x54\x49\xb3\x1e\xfd\xf7\x16\x72\x85\x1c\x79\x36\x19\x46\xc8\xdb\
\x34\x07\xd7\x1f\x50\xdf\x91\x1a\x07\xa6\x94\x63\xdd\xab\xa2\x71\
\xbf\x04\xde\xba\x59\x05\x85\x12\xce\x3d\xf1\xf8\x5c\x2e\x16\xb9\
\x69\xe6\x51\x94\x45\xca\x91\x35\xe6\x0f\x9a\xdd\xd9\x54\x8b\x25\
\xe6\xee\x18\x07\x2b\xbd\xd8\x1b\x2b\x0b\x58\x67\x0a\x92\x9d\x9a\
\x05\x46\xcd\xa2\xee\x81\x2e\x17\x20\x43\x67\xa1\xd4\x17\x38\x01\
\x90\x34\x33\x2a\x16\x74\x46\x16\x47\x88\x46\x93\x00\xa8\x1a\x4f\
\x35\x49\x1d\xe5\xff\x4d\xf3\xbc\x14\xa6\x01\x01\x89\xf1\x37\xf0\
\x6c\x40\x8a\x85\x30\xf4\x42\x68\xcc\x3c\xa7\x9f\x49\x1d\x0a\x42\
\x8f\x81\xcd\xbe\x3f\xf0\xef\x1c\xfc\xc8\x8b\xd0\xe6\x53\x32\x59\
\x13\x5a\x1f\xbf\x72\xb4\x27\xde\x04\x97\x1d\x79\x81\xd4\x9c\x3f\
\xe0\xd5\x2c\x06\x4b\x61\xdd\x01\xa9\xb2\x53\xa9\x03\xfe\x80\x47\
\xc8\xd4\x9b\xe2\x1a\x90\x29\xe7\x5c\xd1\x41\x78\xc4\x43\x63\xe6\
\xcd\xd0\x4e\xc8\x4a\xf5\xc6\x97\xf5\x10\x1f\xf1\xfa\x32\xf7\xe6\
\x26\x4d\x82\x9b\x38\xd2\x74\x11\x1e\xf2\xd0\xe1\x91\xa0\x46\x0e\
\xa3\x98\x56\x6a\xf0\x2a\xfe\xbe\x50\xd7\xf1\x52\xc2\x1d\x7f\x31\
\xcf\x1c\xd2\x8e\x5d\x79\x9d\x07\x17\xa2\x88\x14\x21\xf6\x4f\x9a\
\x8c\xda\x96\x02\xbb\x05\x88\x50\xed\x80\x0c\x23\xaf\x57\xb1\x65\
\x42\xc4\xcc\x6c\x3e\x3b\x26\x17\x5c\xee\x8c\x0a\xad\x3f\x80\x1c\
\x62\x23\x59\xab\x56\x12\xb2\xf0\x92\xfe\xbe\xc0\xc2\xe1\xe7\xf2\
\xb3\x18\x12\x2c\x10\x66\x71\x5d\xd4\xbf\x63\x34\xe8\x1b\x2f\xbe\
\xba\xf5\x62\x85\x97\xd2\x4f\xa8\x6e\xa0\x74\x96\x02\xb6\xed\xa2\
\x8a\xb6\xd8\x76\x71\x54\x49\xdd\x75\x42\x83\x04\xc3\x92\x32\x60\
\x78\xfe\x92\x3e\x56\xaf\x1c\x4f\x0e\xe6\x69\x78\x36\x60\xf6\xc3\
\x13\x5c\xec\x76\xe2\x09\x48\xb2\xc7\xb3\x85\x04\xc3\x93\x32\x60\
\x78\xfe\x9b\x6d\x66\xbf\x2c\xa0\xc2\xb4\xd3\x12\xd2\x91\x10\x75\
\x07\x41\x3a\x08\x51\xf7\x24\x48\x39\x2a\x18\xa6\x8c\x03\x03\xf5\
\xe3\xf6\xd5\x23\xea\xd3\x7d\xa4\x51\x72\xae\x1b\x6a\x9b\xe6\x16\
\x49\x77\x50\xce\x75\x6d\x92\x2e\xbe\x81\x26\x22\xdc\x40\x84\xc1\
\xfb\x71\x0b\x63\x7b\x7c\xb7\x62\xbb\xd6\xe6\xd3\x5f\xb6\xa4\xd6\
\x37\xc4\x4d\x53\x10\x70\xde\xa3\xcf\x25\x7a\xcc\xb5\xb8\x07\xf4\
\x97\x44\xa2\x03\x7e\x3b\x20\xb1\x4d\x08\x6d\xf9\x02\x7d\xd0\x05\
\x73\xfd\x52\xc7\xc6\x0f\x9d\x61\x66\xe3\x09\x75\x7e\xa0\x84\xbc\
\xe4\x8f\x8e\xba\xdc\x70\xa0\x7e\x69\xcb\x40\xd8\xbb\xd0\x01\x09\
\xae\xaf\x71\x6e\xa8\xa7\x68\xc9\xba\x8e\x2a\xd5\x70\xa0\xd6\xf1\
\x8c\xd8\xdb\x3c\x77\x0c\xfb\xba\xcc\xeb\xca\xd8\x47\x16\xd4\xc0\
\x26\x21\xd8\x04\xb5\x3e\x61\x1c\x1c\xd5\x63\x04\xb5\x6b\x8c\x6a\
\x63\xa2\x63\x74\xed\x65\x5f\xb2\x12\xd7\x91\xc8\x2b\x3c\x50\xd7\
\x80\x2b\x20\xf4\xa2\xbd\xdf\x63\x24\x58\xac\xb4\x5e\xe9\xef\x8a\
\xc0\x67\xdb\x44\xfd\x96\x5e\xf2\x1c\x40\xd1\x03\x56\x1e\xca\x04\
\x9c\xf2\x3e\x7b\x3a\xc1\x06\x15\xce\x13\xad\x38\x2a\x83\x1b\x42\
\x38\x60\x5b\xa4\xc5\x46\xcf\x7c\xd4\x20\x31\x8a\x19\x68\xee\xe2\
\x64\xdc\x80\xe1\x60\x40\x39\xf5\x44\x2b\xcc\x60\x34\x1c\xb0\x2d\
\xf2\x4a\xa1\x9f\x25\x63\x82\x81\x67\x5a\x81\x6e\x30\x61\x38\x1e\
\xe3\xc2\x21\x29\x63\x30\x05\x05\x44\x98\xe5\xf7\x1e\xe4\xa3\xe5\
\x29\x24\xbd\x1f\x89\x98\xe6\x27\x65\xa8\x11\x13\x14\xd7\x04\xb3\
\x00\x71\xff\x71\xfe\x0a\x19\x10\x18\xd4\xf2\x65\x0d\xb0\x69\x70\
\x43\x43\x24\x1b\x8b\x54\xa7\x74\xfb\xb8\x10\xb4\x34\xd6\x23\x64\
\x6a\x2a\x90\x4c\x78\x9f\xa4\x30\x34\xf7\x00\xe4\x1a\xb4\xc6\x01\
\x36\x96\x9f\xe1\x5a\xeb\xa5\x49\x50\xda\x58\x6a\x90\x49\xb2\x40\
\x3a\x8f\x9f\xb1\xc9\x3d\x20\xd8\xa0\x36\xee\x68\x73\x69\x19\xae\
\xb7\xc9\xd1\xe6\x32\x82\x4d\xd7\x45\xda\x79\x7c\x6d\x76\x75\x67\
\xd1\x10\x78\x10\xdd\x0d\x65\xe3\xa4\x91\xe8\xa2\xb9\xc3\x50\x23\
\xd0\x05\x00\x23\x9c\x2d\x6b\x80\x4b\x16\x4d\x2c\xaa\x30\xe4\xdc\
\x3c\xd3\xfc\x2a\xc8\xdf\xa6\xbb\xfd\x36\x5d\x56\xd9\x1f\xe9\xe5\
\x84\x8a\x96\xdf\xfc\x06\x0c\x6f\x37\x9a\xb6\xc7\x3b\xba\x0f\xd1\
\x34\x27\x68\xf0\x97\x51\x80\x4c\x7d\x6f\x2a\x88\x31\x65\x82\x9b\
\x81\xca\x80\xe7\x86\x4e\x55\x66\xd6\x43\x99\xac\x68\x75\x01\xdf\
\x96\x01\xba\x48\x27\xfa\x8e\x1f\xfd\xc5\x41\xfb\x81\xba\xb4\x7e\
\xdd\x7e\x53\x4f\x67\x33\x11\xee\xe7\x74\xf1\x9c\x55\xee\x22\x59\
\x3e\x3f\x26\xcb\xd4\xfd\x23\xdb\x67\x8b\x2c\x67\xf1\xcf\x7e\xcf\
\xd9\x64\xa7\x8b\xae\x9f\x7d\xcd\xf4\xf1\x48\x9e\xdd\x17\x9f\x06\
\x86\x77\x8d\xa0\x4f\xb7\x9f\xfb\x42\x08\xae\xfa\x6d\x63\x5d\x57\
\x80\x8c\xfa\x41\x41\x04\x9e\x0d\xb1\x92\x18\x08\x02\x81\xcc\x65\
\x1b\x9d\x80\x29\xdd\x67\xc7\xe0\xb8\x3b\x9e\x7d\xe6\x88\xda\x44\
\x92\xf3\x43\xb6\xd9\x96\xbb\x2a\x29\xaa\xae\xa0\x52\x58\xa1\xf8\
\x22\x92\xe1\x10\x7b\x38\x35\x83\x7e\xaf\x10\xe3\x89\xea\xa5\x42\
\xac\x95\x38\x76\x88\x71\x53\xc6\x08\xb1\x87\xef\x16\x62\x0f\x50\
\x88\xd1\x8b\x2d\xbd\x62\xac\x35\x1f\x3c\xb9\xd6\x3f\xeb\x98\xa6\
\x2f\xa7\xe4\x53\xf8\x82\x83\x60\x30\xe4\x24\x4a\xbc\x3b\x33\x3c\
\x20\x06\xfd\xc6\xf9\x70\x0c\x84\xf9\x43\x3c\x2a\x06\x60\xc2\x31\
\x60\xf0\xbd\x86\x01\x15\xad\x62\x90\xd3\xe5\xc1\xef\xdb\x34\x5d\
\xe9\x9b\xec\xdd\xeb\xa8\xf6\xc4\x9d\xc1\x70\x2c\x9f\xd5\x4d\x3b\
\x86\x03\x7c\xbe\xa9\x16\xda\x1f\xc4\xe3\x9e\x0f\xfc\x8e\x40\x73\
\x85\xea\x43\x91\x41\xf6\xb1\x61\x1a\x8c\xb9\xbb\xe7\x96\x91\x35\
\x16\x26\x28\x64\x2b\xb1\xdd\x26\x89\xc3\xc6\xce\x4c\xdb\xeb\xa9\
\x87\x86\x21\xa2\xb4\xe3\x83\x8a\x8d\xc0\x41\x58\xb2\x48\x33\x06\
\x99\xee\xaa\x2e\x21\xe6\x70\x90\x6c\xd0\x6e\xd5\x34\x44\xcc\x70\
\xba\x95\x04\x6d\x18\xe9\xba\xe5\x94\xeb\x78\xcf\xad\xdb\x0b\x13\
\x28\xea\xad\x9c\x60\x12\x64\xe7\x09\xc9\x28\xcc\x23\x47\x26\x93\
\x67\xc0\x1d\x1e\x5d\xe3\xfa\x6a\xad\xb5\x6f\x86\xbb\xc6\x28\xc8\
\xde\x37\xf8\x26\x92\xc6\x85\x79\xe7\xe3\xf6\x1c\x51\xf3\x3d\x83\
\x46\xb0\x08\xf3\x4a\xcd\x82\xbb\xe4\x3c\xe1\xe2\x9a\xaa\xf5\xd9\
\xe3\x45\xb4\x0a\xf7\x8b\x21\x56\x80\xfa\x61\x4e\x7c\x56\xd5\xa5\
\x7f\x5e\x36\xa6\x65\x6e\x31\x56\x6c\x5a\x2a\x6a\xe5\x09\xa9\xb4\
\x9f\xc9\xe3\x8d\x29\xc9\x6c\x8b\xac\x29\x70\x19\xdd\x30\x78\x20\
\xf4\x73\x44\xdf\x81\xd4\xcb\x15\x5d\x61\x2f\xb2\xa1\xce\x18\x9c\
\x26\xcf\x19\x11\xf6\x7e\xe8\xcc\x89\x2d\x8f\xc1\x03\xaf\x33\x18\
\xba\x96\x40\xa0\x01\x06\x27\x80\x71\xc0\xff\x88\x85\xbe\x3c\x90\
\x2e\x3c\xe6\xcc\x85\x94\x6e\x7f\x09\xf5\x5b\x7b\x21\xd9\xf2\xba\
\xe7\x5c\x30\x79\x64\x35\x26\xe8\xd5\x44\x5d\x8d\xe9\x59\xd4\x18\
\xb4\x2a\xf1\xe9\x55\x4d\xe1\x8d\x0a\x1c\x0a\xd0\x9f\x22\x69\xee\
\xfd\x52\x8a\x76\x4f\x8d\x2c\x7e\xef\x8b\x0f\xeb\xf4\x7d\xf9\xa5\
\xc7\x69\x01\xb6\x97\x7f\xe9\xf3\x7b\x9b\xd2\x0a\x09\x2b\x7c\x42\
\xc0\xe3\x6f\x31\x9a\xfe\xd4\x5b\xc2\x33\x03\x2f\x72\x4f\xb4\xeb\
\x00\xee\xa5\x78\x03\x47\x73\x84\x76\x5b\x4b\x60\x38\xf7\xfd\xd1\
\x5d\x99\xe7\x5d\xc7\xf3\xac\xde\x7d\x83\x77\x1f\x43\xbf\xb7\xbf\
\xe4\x73\x1d\x82\x7a\x7a\x92\xa1\xa4\x97\xf0\xcf\x49\xa7\x43\xac\
\x96\xfe\xc0\x85\xf7\x50\xb9\x1b\x2e\x2a\x02\xb9\x02\x98\x82\xfd\
\x59\x96\x9b\x5e\xd8\x9a\x6e\xd5\xc5\xc8\x41\xdd\x5a\x3b\x41\x94\
\xaa\x5c\x4d\x82\x75\xeb\x79\x3e\xb3\xd5\x8f\x38\xa8\xfe\xa7\xbd\
\x77\xa4\x21\x29\x65\x2e\xfb\x8b\x11\x71\xfd\x27\x76\xfc\xfa\x4f\
\xec\x4c\x67\xec\x47\x70\xd3\xf7\x42\x43\xab\xe4\x84\xf6\xc0\x3f\
\x35\x55\xa7\x03\xf5\x0c\x6a\xcd\xe6\x73\xf6\x23\x0a\x7d\xf9\x82\
\x9f\xe2\x59\x18\x0e\xe8\x80\x4f\x4d\xe9\x79\x4a\xb3\x0b\x12\x8e\
\xc7\xab\x87\x24\x18\xae\xa7\x15\x24\xe8\x9c\x91\x93\x61\x48\xfa\
\x9e\xd5\xec\xc2\xe4\xaf\x03\x89\x7a\xff\x6e\x74\x4c\xf0\x39\xac\
\x40\x87\x51\xe9\x75\x60\xd3\x22\x73\xfd\x75\x12\x97\x7b\xd6\xcc\
\x85\x9c\x2f\x3a\x12\x21\x30\xec\x0a\x34\x50\xc1\xfa\x95\x40\xe3\
\xf9\x4f\x51\x0f\x48\x77\xa4\x3e\x8b\x87\x31\x27\xaf\x03\xa5\xee\
\x70\xea\x75\x6b\x0c\x8f\xf8\x50\x89\x78\x8b\xc9\xfc\xc8\xd1\x66\
\x3a\x0a\x2b\xd0\x11\xe0\xda\x84\x3e\x22\x70\x93\x70\xd8\xed\xa6\
\x7a\x99\xa1\x55\x5f\xed\xfc\x21\xba\x4d\xc2\x37\x0c\x25\xf7\x18\
\x8b\x16\x72\x82\xb5\x21\xf1\xdc\x3a\xa2\x7f\xdc\x71\x1d\x64\xe5\
\x9f\x7a\x0b\x05\x71\x90\xb9\x82\x60\x27\x4f\x1b\x5a\x93\xeb\xc6\
\x1d\xf8\xaf\x7e\xdc\xbb\xaf\x62\xe0\x1b\xea\x0c\x78\x8e\x75\x4f\
\x97\x87\xf0\x92\xc5\xf2\x18\xad\xe3\x20\xc7\xf6\x6c\x37\x65\x94\
\x53\xc4\xaa\x46\xda\x1f\x05\xe3\x74\xc4\x18\xe3\x2e\xac\xf9\x9c\
\xfb\x99\x8c\x41\xf3\x8d\x40\x47\x8c\x31\x6f\xa8\x1a\xcf\x92\x9f\
\xc9\x18\x3c\x37\x88\x0c\x88\x39\xfa\xfc\x12\x17\xff\x02\x51\x86\
\x0c\x97\x96\x0a\x5a\x81\xdc\x6e\xb1\x92\x2d\x2a\x2b\x5a\xb4\xce\
\x56\xab\xb4\xd0\xf2\x8e\xc1\x23\x82\x1d\xa6\x82\x2f\x32\x60\xd6\
\xf4\x18\x30\xa3\x59\x03\xdf\x30\xd1\x34\xc2\xcc\x41\x47\x0c\x76\
\x55\xe3\xdc\xf6\x18\xcd\xe9\x18\x32\x58\x3d\x3d\x12\xfb\x0c\x9a\
\xd1\x62\x0d\xb8\x2b\xa1\xe8\x83\xd9\xd2\x0c\x9b\xff\x03\x6c\xf5\
\xac\x4f\
\x00\x00\x02\x96\
\x89\
\x50\x4e\x47\x0d\x0a\x1a\x0a\x00\x00\x00\x0d\x49\x48\x44\x52\x00\
\x00\x00\x20\x00\x00\x00\x20\x08\x06\x00\x00\x00\x73\x7a\x7a\xf4\
\x00\x00\x00\x04\x73\x42\x49\x54\x08\x08\x08\x08\x7c\x08\x64\x88\
\x00\x00\x00\x09\x70\x48\x59\x73\x00\x00\x0d\xd7\x00\x00\x0d\xd7\
\x01\x42\x28\x9b\x78\x00\x00\x00\x19\x74\x45\x58\x74\x53\x6f\x66\
\x74\x77\x61\x72\x65\x00\x77\x77\x77\x2e\x69\x6e\x6b\x73\x63\x61\
\x70\x65\x2e\x6f\x72\x67\x9b\xee\x3c\x1a\x00\x00\x02\x13\x49\x44\
\x41\x54\x58\x85\xed\x95\xdb\xae\xe9\x50\x14\x86\xff\x3a\xa4\x8d\
\x44\xdc\x10\x91\xe0\x19\xc4\x03\xb8\xf2\x08\x1e\xd6\x0b\xb8\x21\
\x84\x6a\x51\x82\x46\x5a\x71\x8a\xc6\xa9\xf4\x38\xf7\xcd\xde\xcd\
\xee\xee\x2a\xb5\x56\x53\x37\xfb\xbf\x1b\xc3\x18\xf3\xff\x8c\x79\
\x28\xd5\x68\x34\x88\xa6\x69\xf8\x84\x68\x9a\x46\xec\x53\xe6\x00\
\xa0\x69\x1a\x62\x1f\x73\xff\xad\xc4\xdf\x41\x2a\x95\x8a\xc4\x54\
\x55\xd5\xaf\x01\x6a\xb5\x1a\x12\x89\x84\xa7\x21\x4c\x99\xa6\x89\
\x66\xb3\xe9\xc4\x1f\xdf\x82\xd0\x01\x08\x21\xd0\x75\x3d\x70\x7d\
\xa8\xf3\x56\x14\x05\x9d\x4e\x07\xba\xae\x23\x9f\xcf\xa3\x5a\xad\
\x22\x1e\x8f\x3f\xed\x09\x6d\x02\x84\x10\x0c\x06\x03\xe7\xdf\x6f\
\xb7\x5b\xac\x56\xab\x97\x7d\xa1\x01\x68\x9a\x86\xeb\xf5\xea\xca\
\xed\xf7\xfb\xe8\x00\x08\x21\x9e\x1c\x45\x51\xd1\x01\x30\x0c\x83\
\x74\x3a\xed\xca\xe5\x72\xb9\xe8\x00\x28\x8a\x42\xa5\x52\x01\xc3\
\x30\xa0\x28\x0a\x85\x42\x01\xe5\x72\xf9\x65\x5f\xe0\x5b\x20\x49\
\x12\x8a\xc5\xe2\xd3\x9a\x4c\x26\x83\x7a\xbd\x0e\xc3\x30\x90\x4c\
\x26\x03\xad\x1b\x68\x02\x87\xc3\x01\xfd\x7e\x1f\xeb\xf5\x3a\xd0\
\xa2\x41\xcd\x03\x01\x10\x42\x30\x1a\x8d\x00\x00\x1c\xc7\x21\xec\
\xaf\xe7\x4b\x00\x51\x14\x71\x3e\x9f\x01\x00\xba\xae\x63\x3c\x1e\
\x47\x07\xa0\x69\x1a\xa6\xd3\xa9\x2b\x27\x49\xd2\xcb\xfb\x7d\xbf\
\xdf\x61\xdb\xf6\xcf\x01\x04\x41\x80\x61\x18\x9e\xfc\x70\x38\x84\
\x65\x59\xbe\xe6\xad\x56\xcb\xd9\xb6\x6f\x03\x9c\x4e\x27\xdf\xa7\
\x54\x55\x55\x08\x82\xe0\xc9\x9b\xa6\x89\x76\xbb\x8d\xc7\xe3\x01\
\x51\x14\x21\xcb\xf2\xf7\x00\x08\x21\xe0\x79\xfe\x69\xe3\x62\xb1\
\x80\xa2\x28\x4e\x6c\xdb\x36\xda\xed\x36\x2e\x97\x8b\x93\x63\x59\
\xd6\x15\x07\x06\x90\x65\x19\xc7\xe3\xf1\x69\xe3\x1f\x03\x42\x08\
\x08\x21\xe8\xf5\x7a\x9e\x1e\xcb\xb2\xd0\xeb\xf5\x7c\xb7\xeb\x4b\
\x00\xd3\x34\x03\x9f\xf4\xcb\xe5\x82\xf9\x7c\x0e\x9e\xe7\xb1\xd9\
\x6c\x7c\x6b\x58\x96\xf5\x5d\xc3\xf3\x12\xce\x66\xb3\xb7\xee\xfa\
\x64\x32\x79\x59\x23\xcb\x32\xb2\xd9\x2c\x4a\xa5\x92\xe7\x37\xd7\
\x04\x54\x55\xc5\x72\xb9\x0c\x6c\xfe\x8e\x38\x8e\x73\xde\x13\x5f\
\x00\x8e\xe3\x02\xdf\xdf\x77\x65\x59\x16\xba\xdd\xae\xe7\x3c\xb8\
\x00\x82\x1c\xbc\x9f\xe8\x76\xbb\x61\x30\x18\xf8\x03\x44\xa1\xdd\
\x6e\xf7\x59\x80\x7f\xf5\x1f\x20\x46\xd3\xf4\xc7\xcc\x69\x9a\xc6\
\x2f\x6b\xaf\x16\xcf\x00\x32\x85\x29\x00\x00\x00\x00\x49\x45\x4e\
\x44\xae\x42\x60\x82\
"

qt_resource_name = b"\
\x00\x0b\
\x08\x78\xea\xc3\
\x00\x61\
\x00\x6e\x00\x69\x00\x6d\x00\x61\x00\x74\x00\x65\x00\x2e\x00\x63\x00\x73\x00\x73\
\x00\x0f\
\x04\xd3\xe1\x87\
\x00\x69\
\x00\x6d\x00\x61\x00\x67\x00\x65\x00\x65\x00\x64\x00\x69\x00\x74\x00\x6f\x00\x72\x00\x2e\x00\x70\x00\x6e\x00\x67\
"

qt_resource_struct_v1 = b"\
\x00\x00\x00\x00\x00\x02\x00\x00\x00\x02\x00\x00\x00\x01\
\x00\x00\x00\x1c\x00\x00\x00\x00\x00\x01\x00\x00\x0b\x67\
\x00\x00\x00\x00\x00\x01\x00\x00\x00\x01\x00\x00\x00\x00\
"

qt_resource_struct_v2 = b"\
\x00\x00\x00\x00\x00\x02\x00\x00\x00\x02\x00\x00\x00\x01\
\x00\x00\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x1c\x00\x00\x00\x00\x00\x01\x00\x00\x0b\x67\
\x00\x00\x01\x6a\xe4\xf0\xa2\x20\
\x00\x00\x00\x00\x00\x01\x00\x00\x00\x01\x00\x00\x00\x00\
\x00\x00\x01\x5e\x3e\x0c\xcb\xb8\
"

qt_version = [int(v) for v in qVersion().split('.')]
if qt_version < [5, 8, 0]:
    rcc_version = 1
    qt_resource_struct = qt_resource_struct_v1
else:
    rcc_version = 2
    qt_resource_struct = qt_resource_struct_v2

def qInitResources():
    qRegisterResourceData(rcc_version, qt_resource_struct, qt_resource_name, qt_resource_data)

def qCleanupResources():
    qUnregisterResourceData(rcc_version, qt_resource_struct, qt_resource_name, qt_resource_data)

qInitResources()